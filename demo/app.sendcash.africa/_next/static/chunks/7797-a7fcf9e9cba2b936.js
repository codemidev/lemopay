(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7797],{60299:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(49492),o=n(85893),a=function(){return(0,o.jsxs)("svg",{width:"49",height:"48",viewBox:"0 0 49 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsx)("circle",{cx:"24.5",cy:"24",r:"24",fill:"#28BE37"}),(0,o.jsx)("path",{d:"M32.5 18L21.5 29L16.5 24",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})]})},i=n(83466),s=function(e){var t=e.title,n=e.description,s=e.buttonLabel,c=e.buttonAction,u=e.type,l=void 0===u?"error":u,d=e.card,m=void 0===d||d,p=e.backLink,f=e.footerComponent,h=e.hideHeader,y=function(){switch(l){case"success":case"loading":return(0,o.jsx)(a,{});default:return(0,o.jsx)(r.Z,{})}},v=function(){return(0,o.jsx)("div",{className:"page__main",children:(0,o.jsx)("div",{className:[m?"card--large mt":"","text-center"].join(" "),children:(0,o.jsxs)("div",{children:[y(),t?(0,o.jsx)("h2",{className:"card__title strong my",children:t}):null,n?(0,o.jsx)("p",{className:"card__content small color-neutral-gray",children:n}):null]})})})},x=function(){return s?(0,o.jsxs)("footer",{className:"page__footer",children:[(0,o.jsx)("button",{type:"button",className:"button button--wide mb",onClick:c,children:s}),f]}):null};return void 0!==h&&h?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(v,{}),(0,o.jsx)(x,{})]}):(0,o.jsxs)("div",{className:"page--full",children:[(0,o.jsx)(i.Z,{backLink:p,showCloseButton:!1}),(0,o.jsx)(v,{}),(0,o.jsx)(x,{})]})}},49492:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(85893);function o(e){var t=e.classList,n=void 0===t?[]:t;return(0,r.jsxs)("svg",{className:n.join(" "),xmlns:"http://www.w3.org/2000/svg",width:"49",height:"48",viewBox:"0 0 49 48",fill:"none",children:[(0,r.jsx)("circle",{cx:"24.5",cy:"24",r:"24",fill:"#FD8368"}),(0,r.jsx)("path",{d:"M30.5 18L18.5 30",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M18.5 18L30.5 30",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})]})}},50401:function(e){e.exports={p2pCommissionPercentage:function(e){var t;switch(!0){case e<50:t=5;break;case e<150:t=4;break;case e<500:t=3.5;break;default:t=2.5}return t}}},77797:function(e,t,n){"use strict";n.d(t,{E:function(){return Y},Z:function(){return W}});var r=n(50029),o=n(92777),a=n(82262),i=n(10748),s=n(81531),c=n(63553),u=n(37247),l=n(59499),d=n(87794),m=n.n(d),p=n(67294),f=n(11163),h=n.n(f),y=n(82730),v=n(35625),x=n(93475),g=n(59904),b=n(68725),k=n(50401),j=n(69580),w=n(6704),C=n(24491),Z=n(83466),L=n(34930),M=n(42252),P=n(51557),S=n(43401),B=n(85893),N=function(e,t){return function(e){var n=e.onClick,r=e.showModal,o=e.onClose,a=e.verificationStatus;return(0,B.jsx)(t,{titleId:"verification-modal-title",open:r,onDismiss:o,children:"submitted"===a?(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("h2",{className:"modal__title h2 text-center pt-l",id:"verification-modal-title",children:"Verification"}),(0,B.jsxs)("p",{className:"modal__body pb-xl",children:[(0,B.jsx)("span",{className:"py-xl flex-layout-center-column",children:(0,B.jsx)(S.Z,{})}),"We're currently processing your verification request. Please check again in 30 minutes."]}),(0,B.jsx)("div",{className:"modal__footer px",children:(0,B.jsx)("button",{className:"button button--wide my",onClick:function(){return o()},type:"button",children:"Go Back"})})]}):(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("h2",{className:"modal__title h2 text-center pt-l",id:"verification-modal-title",children:"Verification"}),(0,B.jsxs)("p",{className:"modal__body pb-xl",children:[(0,B.jsx)("span",{className:"py-xl flex-layout-center-column",children:(0,B.jsx)(S.Z,{})}),["failed","resubmit","abandoned"].includes(a)?(0,B.jsx)(B.Fragment,{children:"Your previous verification was not successful. Please try again"}):(0,B.jsx)(B.Fragment,{children:"Please verify your identity to continue. It will only take a few minutes."})]}),(0,B.jsx)("div",{className:"modal__footer px",children:(0,B.jsx)("button",{className:"button button--wide my",onClick:function(){return n()},type:"button",children:"Begin Verification"})})]})})}}(p,P.Z),A=n(43894),R=n(60299),O=function(){return(0,B.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"43",height:"42",fill:"none",children:[(0,B.jsxs)("g",{clipPath:"url(#A)",transform:"translate(0 -1)",children:[(0,B.jsx)("path",{d:"M22.288 42.695V43H32.4v-.305c0-4.56 5.156-11.093 5.156-20.932 0-8.378-1.407-12.907-2.262-15C34.578 5.012 33.765 4 32.032 4s-3.428.664-3.888 4.53c-1.358 11.5-6.562 18.148-5.856 34.166zm-1.54 0V43H10.645v-.305c0-4.56-5.156-11.093-5.156-20.932 0-8.378 1.407-12.907 2.262-15C8.457 5.012 9.27 4 11.003 4s3.428.664 3.888 4.53c1.36 11.5 6.562 18.148 5.856 34.166z",fill:"#fff",stroke:"#1f1f1f"}),(0,B.jsx)("path",{d:"M34.125 8.477c.498 1.756 1.842 8.62 1.275 15.49C34.753 31.812 30.666 38 30.328 43H12.743c-.338-5-4.424-11.188-5.07-19.033-.562-6.87.782-13.74 1.275-15.49C9.38 6.94 9.9 6 10.944 6c.975 0 1.676.483 1.858 2.737.423 5.3 1.135 17.26 1.45 23.006.327 5.893 2.598 10.956 7.13 10.956h.32c4.526 0 6.787-5.062 7.113-10.956l1.45-23.006C30.45 6.483 31.152 6 32.127 6c1.044 0 1.564.94 1.998 2.477z",strokeMiterlimit:"10",stroke:"#1f1f1f"}),(0,B.jsx)("path",{d:"M25.513 5v.176c-2.492 0-3.947 1.508-3.947 3.984h-.246c0-2.492-1.492-3.984-3.958-3.984V5c2.465 0 3.958-1.508 3.958-4h.246c0 2.482 1.455 4 3.947 4z",fill:"#1f1f1f"}),(0,B.jsx)("path",{d:"M0 42.5h43",strokeMiterlimit:"10",stroke:"#1f1f1f"})]}),(0,B.jsx)("defs",{children:(0,B.jsx)("clipPath",{id:"A",children:(0,B.jsx)("path",{transform:"translate(0 1)",d:"M0 0h43v42H0z",fill:"#fff"})})})]})};function D(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var o=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var _=function(e){(0,s.Z)(n,e);var t=D(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"render",value:function(){return(0,B.jsx)("svg",{width:"26",height:"25",viewBox:"0 0 26 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,B.jsx)("path",{d:"M25.0621 5.60354C25.0621 6.63883 24.7483 7.5957 24.1209 8.47413H16.4033C16.6542 8.28589 16.7797 7.97217 16.7797 7.53295C16.7797 7.09374 16.5287 6.74864 16.0268 6.49766C15.5248 6.21531 14.8817 6.07413 14.0974 6.07413C11.7444 6.07413 10.568 6.7957 10.568 8.23883C10.568 8.80354 11.0072 9.21139 11.8856 9.46237C12.764 9.71335 13.8307 9.91727 15.0856 10.0741C16.3405 10.231 17.5954 10.4663 18.8503 10.78C20.1052 11.0624 21.1719 11.6428 22.0503 12.5212C22.9287 13.3996 23.368 14.5761 23.368 16.0506C23.368 18.6545 22.317 20.631 20.215 21.98C18.1444 23.329 15.117 24.0035 11.1327 24.0035C7.14835 24.0035 4.35619 23.3604 2.75619 22.0741C1.50129 21.0702 0.87384 19.6898 0.87384 17.933C0.87384 17.431 0.920899 16.9133 1.01502 16.38L8.87384 16.2859C8.8111 16.7251 9.06208 17.1173 9.62678 17.4624C10.2229 17.7761 11.0856 17.933 12.215 17.933C13.3444 17.933 14.1601 17.8231 14.6621 17.6035C15.164 17.3526 15.415 16.8977 15.415 16.2388C15.415 15.7996 14.9758 15.5016 14.0974 15.3447C13.2189 15.1565 12.1366 14.9996 10.8503 14.8741C9.59541 14.7486 8.32482 14.5447 7.03855 14.2624C5.78364 13.98 4.71698 13.3839 3.83855 12.4741C2.96011 11.5643 2.5209 10.3722 2.5209 8.89766C2.5209 6.04276 3.61894 3.84668 5.81502 2.30942C8.04247 0.772168 11.2425 0.00354004 15.415 0.00354004C21.8464 0.00354004 25.0621 1.87021 25.0621 5.60354Z",fill:"#6889FD"})})}}]),n}(p.Component),U=_;function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var o=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var F=function(e){(0,s.Z)(n,e);var t=E(n);function n(e){var r;return(0,o.Z)(this,n),r=t.call(this,e),(0,l.Z)((0,i.Z)(r),"openMercuryo",(function(){r.setState({openingMercuryo:!0}),r.props.openMercuryo(),setTimeout((function(){r.setState({openingMercuryo:!1})}),3e3)})),r.state={openingMercuryo:!1},r}return(0,a.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.recipient,r=t.onClose;return(0,B.jsxs)(P.Z,{titleId:"verification-modal-title",open:this.props.showModal,onDismiss:function(){return r()},backToTop:!1,children:[(0,B.jsxs)("div",{className:"modal__title flex justify-center items-center pt",children:[(0,B.jsx)(O,{}),(0,B.jsx)("span",{className:"opacity-50 ml-s mr-s",children:"|"}),(0,B.jsx)(U,{})]}),(0,B.jsxs)("div",{className:"modal__body px",children:[(0,B.jsx)("h1",{id:"verification-modal-title",className:"h3 py-l text-center",children:"Pay with card on Mercuryo"}),(0,B.jsxs)("p",{className:"text-center small color-neutral-gray mx-l mb-l lh",children:["You will be redirected to Mercuryo to pay securely with your card. ",(0,B.jsx)("span",{className:"fw-600",children:"Ensure you confirm the current fee before paying."})," Once we receive your card payment, we'll let you know and send Naira to"," ",n.firstName," ",n.lastName,"."]}),(0,B.jsx)("div",{className:"modal__footer flex-layout-center-center mt-xl",children:(0,B.jsx)("button",{"data-analytics-event":"Clicked open mercuryo on modal on payment methods page",className:"button button--wide mb-l",onClick:function(){return e.openMercuryo()},type:"button",children:this.state.openingMercuryo?"Redirecting to Mercuryo...":"Open Mercuryo"})})]})]})}}]),n}(p.Component),T=n(34593),V=n(54283),q=n(75268),I=n(99009);function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var o=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}function W(){var e=function(e){(0,s.Z)(n,e);var t=H(n);function n(e){var a,s,c,u;((0,o.Z)(this,n),c=t.call(this,e),(0,l.Z)((0,i.Z)(c),"fxRateSubscription",void 0),(0,l.Z)((0,i.Z)(c),"p2pPaymentCurrency",y.allCurrencies.NGN),(0,l.Z)((0,i.Z)(c),"Store",void 0),(0,l.Z)((0,i.Z)(c),"backLink",{href:"/send/recipient-details",name:"Recipient details form",currentPageName:'"Send with" page'}),(0,l.Z)((0,i.Z)(c),"getUsdcBalance",(0,r.Z)(m().mark((function e(){var t,n,r,o;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.setState({fetchingBalance:!0}),e.prev=1,e.next=4,w.Z.request("user/account-balance");case 4:t=e.sent,n=t.accountBalances,r=(null===n||void 0===n?void 0:n.find((function(e){return"primary"===e.type&&"dollar"===e.currency})))||{},((o=r.balance)||0===o)&&c.setState({isLoggedIn:!0,usdcBalance:o},c.shouldEnableBalance),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),c.setState({isLoggedIn:!1}),console.log(e.t0);case 14:return e.prev=14,c.setState({fetchingBalance:!1}),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,10,14,17]])})))),(0,l.Z)((0,i.Z)(c),"getPaymentLink",(0,r.Z)(m().mark((function e(){var t,n,r,o,a;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=null===(t=c.props.params)||void 0===t?void 0:t.paymentLinkSlug){e.next=5;break}return console.log("Missing payment link slug. Expected string, got: ".concat(n)),e.abrupt("return");case 5:return e.next=7,w.Z.request("/payment-links/".concat(n));case 7:r=e.sent,c.savePaymentLinkData(r),window.trackEvents({type:"action",properties:{event:"Clicked payment link"}}),e.next=21;break;case 12:if(e.prev=12,e.t0=e.catch(0),a=e.t0.message,!["link does not exist","payment link not found"].some((function(e){return null===a||void 0===a?void 0:a.toLowerCase().includes(e)}))){e.next=19;break}throw e.t0.custom={message:"Payment page not found",description:"You appear to have followed a broken link or entered a link that does not exist.",linkText:"Create New Payment Link",link:"/receive/choose-account",status:404},e.t0;case 19:null===(o=(0,j.t)("@/notification"))||void 0===o||o.notify({message:"We were unable to retrieve the account details for that payment link. You can enter the details manually on the next page"}),c.props.router.replace("/home");case 21:case"end":return e.stop()}}),e,null,[[0,12]])})))),(0,l.Z)((0,i.Z)(c),"updateAmountAndFees",(function(e,t){var n=e||c.state.fxRate,r=t||c.state.amount,o=c.getUsdAmount(n,r)||0,a=c.getFiatAmount(n,r),i=c.getP2PFee(o),s=+o>y.limits.maxP2p;c.setState({fxRate:n,amount:r,usdAmount:o,fiatAmount:a,p2p:G(G({},c.state.p2p),{},{fee:i,limitExceeded:s})}),c.checkMercuryoLimits(n)})),(0,l.Z)((0,i.Z)(c),"getUsdAmount",(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.state.sourceCurrency,r=y.allCurrencies[n],o=y.allCurrencies.USD;return r===o?t:(0,v.convertCurrency)({amount:t,from:r,to:o,fxRate:e}).value})),(0,l.Z)((0,i.Z)(c),"convertUsd",(function(e){return(0,v.convertCurrency)({amount:e,from:y.allCurrencies.USD,to:y.allCurrencies[c.state.sourceCurrency],fxRate:c.state.fxRate}).value})),(0,l.Z)((0,i.Z)(c),"getFiatAmount",(function(e,t){var n=c.state.sourceCurrency,r=y.allCurrencies[n],o=c.p2pPaymentCurrency;return r===o?t:(0,v.convertCurrency)({amount:t,from:r,to:o,fxRate:e}).value})),(0,l.Z)((0,i.Z)(c),"getP2PFee",(function(e){var t=(0,k.p2pCommissionPercentage)(e);return Number((t*e/100).toFixed(2))})),(0,l.Z)((0,i.Z)(c),"shouldEnableBalance",(function(e){var t=e||c.state,n=t.amount,r=t.fxRate,o=t.usdcBalance,a=t.sourceCurrency,i=c.getUsdAmount(r,n,a);return(0,b.isLessThan)(o,i)?(e||c.setState({enableBalance:!1}),!1):(e||c.setState({enableBalance:!0}),!0)})),(0,l.Z)((0,i.Z)(c),"savePaymentLinkData",(function(e){var t,n;e.hasFixedAmount?c.backLink=void 0:c.backLink={href:"/to/".concat(e.slug),name:"Amount Input page"};var r={destinationCurrency:"NGN",amount:String((null===(t=c.state)||void 0===t?void 0:t.amount)||"0"),recipient:{}},o=e.account,a=(0,g.toTitleCase)(o.accountName).replace(",","").replace(/\s\s+/g," "),i=(0,g.getFirstName)(a),s=(0,g.getLastName)(a);r.recipient=G(G({},o),{},{accountName:a,firstName:i,lastName:s}),r.paymentLink=e,e.hasFixedAmount&&(r.amount=String(e.amount),r.sourceCurrency=y.currencyCodes[e.currency]),c.setState({paymentLink:e,recipient:r.recipient,amount:+r.amount,sourceCurrency:r.sourceCurrency||(null===(n=c.state)||void 0===n?void 0:n.sourceCurrency)}),c.Store.update("transaction",r)})),(0,l.Z)((0,i.Z)(c),"checkMercuryoLimits",function(){var e=(0,r.Z)(m().mark((function e(t){var n,r,o,a,i,s,u,l,d,p,f;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.mercuryo.io/v1.5/public/currency-limits?from=USD&to=BTC&widget_id=d46bf086-2f3b-413c-8b1d-8edd6fa87475",e.next=3,fetch("https://api.mercuryo.io/v1.5/public/currency-limits?from=USD&to=BTC&widget_id=d46bf086-2f3b-413c-8b1d-8edd6fa87475");case 3:if(200===(n=e.sent).status){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,n.json();case 8:r=e.sent,o=r.data,a=(0,b.round)(o.USD.min)||30,i=(0,b.round)(o.USD.max)||y.limits.max,s=c.getUsdAmount(t,c.state.amount),u=c.getUsdAmount(t,c.state.promoCodeDiscount),l=(0,b.subtract)(s,u),d=(0,b.isLessThan)(s,a),p=(0,b.isGreaterThan)(s,i),f=!d&&!p,c.setState({mercuryo:G(G({},c.state.mercuryo),{},{belowMinimum:d,aboveMaximum:p,withinLimits:f,displayMinimum:(0,x.getDisplayAmount)(c.convertUsd((0,b.round)(a)),c.state.sourceCurrency),displayMaximum:(0,x.getDisplayAmount)(c.convertUsd((0,b.round)(i)),c.state.sourceCurrency),fee:(0,x.getDisplayAmount)(c.convertUsd((0,b.multiply)(l,.0395)),c.state.sourceCurrency)})});case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,l.Z)((0,i.Z)(c),"selectPaymentMethod",(function(e){var t=e.id,n=e.method,r=e.usingMercuryo;if(c.state.isLoggedIn&&r)c.setState({mercuryo:G(G({},c.state.mercuryo),{},{showModal:!0})});else{var o=["method=".concat(t||n)];r&&o.push("mercuryo=".concat(r));var a="/send/sender-details?".concat(o.join("&"));h().push(a)}})),(0,l.Z)((0,i.Z)(c),"openMercuryo",(function(){h().push("/send/with-bitcoin?mercuryo=true&openMercuryo=true")})),(0,l.Z)((0,i.Z)(c),"checkBaseLimits",(function(e){return(0,b.isLessThan)(c.state.usdAmount,y.limits.min)?{title:"Amount too small",description:"Please enter an amount greater than ".concat((0,v.convertCurrency)({amount:y.limits.min,from:y.limits.currency,to:e,fxRate:c.state.fxRate}).displayValue,".")}:(0,b.isGreaterThan)(c.state.usdAmount,y.limits.max)?{title:"Amount too large",description:"Please enter an amount less than ".concat((0,v.convertCurrency)({amount:y.limits.min,from:y.limits.currency,to:e,fxRate:c.state.fxRate}).displayValue,".")}:void 0})),(0,C.S)())&&(c.Store=(0,j.t)("@/global-store"),null!==(u=c.props.params)&&void 0!==u&&u.paymentLinkSlug&&!c.props.paymentLink&&c.getPaymentLink(),c.props.paymentLink&&c.savePaymentLinkData(c.props.paymentLink));var d=c.props,p=d.fxRate,f=d.usdcBalance,Z=(null===(a=c.Store)||void 0===a?void 0:a.transaction)||{},L=Z.sourceCurrency||"USD",M=+Z.amount||+Z.displayAmount;return M&&"NaN"!==M||(M=100),c.state={isLoggedIn:!(null===(s=c.props.currentUser)||void 0===s||!s.email),amount:M,fxRate:p,usdAmount:null,fiatAmount:null,promoCodeDiscount:0,sourceCurrency:L,p2p:{fee:null,limitExceeded:!1,modalVisible:!1},usdcBalance:f,fetchingBalance:null===f,enableBalance:c.shouldEnableBalance({amount:M,fxRate:p,usdcBalance:f,sourceCurrency:L}),paymentLink:c.props.paymentLink,recipient:Z.recipient||{},mercuryo:{fee:null,showModal:!1,displayMinimum:"",displayMaximum:"",withinLimits:!1,belowMinimum:!1,aboveMaximum:!1},isDesktop:!!(0,C.S)()&&(0,V.R)()},null===f&&c.getUsdcBalance(),c}return(0,a.Z)(n,[{key:"componentDidMount",value:function(){var e,t,n,r,o=this,a=(0,j.t)("@/exchange-rate").fxRate$,i=this.Store.transaction;null!==(e=this.props.params)&&void 0!==e&&e.paymentLinkSlug&&!this.props.paymentLink&&this.getPaymentLink(),this.props.paymentLink&&this.savePaymentLinkData(this.props.paymentLink),null!==(t=this.props.params)&&void 0!==t&&t.paymentLinkSlug||null!==i&&void 0!==i&&null!==(n=i.recipient)&&void 0!==n&&n.id&&null!==i&&void 0!==i&&null!==(r=i.recipient)&&void 0!==r&&r.accountName||(console.log("Missing recipient information. Redirecting..."),h().push("/home?done=true")),this.fxRateSubscription=a.subscribe((function(e){o.updateAmountAndFees(e)})),window.trackEvents({type:"action",properties:{event:'Viewed "Send with" page'}})}},{key:"componentDidUpdate",value:function(e,t){var n,r;t.amount===this.state.amount&&(null===(n=t.fxRate)||void 0===n?void 0:n.dollar)===(null===(r=this.state.fxRate)||void 0===r?void 0:r.dollar)||this.shouldEnableBalance()}},{key:"componentWillUnmount",value:function(){var e;null===(e=this.fxRateSubscription)||void 0===e||e.unsubscribe()}},{key:"render",value:function(){var e,t,n,r=this,o=this.state,a=o.usdcBalance,i=o.enableBalance,s=o.fetchingBalance,c=o.amount,u=o.sourceCurrency,l=this.state,d=l.recipient,m=l.paymentLink,p=l.isDesktop,f=(m||{}).hasFixedAmount,v=null!==(e=this.props.params)&&void 0!==e&&e.paymentLinkSlug?"amount":"both",g=(null===(t=this.props.currentUser)||void 0===t?void 0:t.isFlagged)||!1;return f&&(v="none"),(0,B.jsxs)("div",{className:p?"page--slim":"page--full",children:[(0,B.jsx)(q.Z,{hook:I.C,argumentsList:[],onUpdate:function(e){r.setState({isDesktop:e})}},"useIsDesktop"),(0,B.jsx)(Z.Z,{title:"Send with",backLink:this.backLink,showCloseButton:!m||f}),g?(0,B.jsx)(R.Z,{title:"Account Restricted",description:"Your account has been restricted. Please contact ".concat(y.support.email),buttonLabel:"Go back",buttonAction:function(){h().push("/home")},backLink:this.backLink,hideHeader:!0}):(0,B.jsxs)("div",{className:"page__main",children:[(0,B.jsx)("section",{className:"mb-l text-center",children:(0,B.jsx)("div",{className:"mb-s",children:(0,B.jsx)(A.Z,{recipient:d,editable:v,onChange:function(e){return r.updateAmountAndFees(null,e)},amount:c,currency:u,event:"clicked recipient icon on the send with page"})})}),(0,B.jsxs)("section",{className:"flex-layout-center-column",children:[(0,B.jsxs)("div",{className:"card__banner-wrapper",children:[(0,B.jsxs)("ul",{className:"list list--clickable list--card list--with-shadow mb-none",children:[s?null:i?(0,B.jsx)(T.Z,{method:"usdc",usdcBalance:a,fiatAmount:r.state.fiatAmount,name:"Wallet Balance",summary:"Your Balance: ".concat((0,x.getDisplayAmount)(a,"USD")),disabledReason:function(){var e=r.checkBaseLimits("USDC");if(e)return e}(),selectPaymentMethod:r.selectPaymentMethod}):null,y.disableBtc?null:(0,B.jsx)(T.Z,{method:"bitcoin",name:"Bitcoin",summary:"Send from a Bitcoin wallet",selectPaymentMethod:this.selectPaymentMethod,usdcBalance:a,fiatAmount:this.state.fiatAmount,disabledReason:function(){var e=r.checkBaseLimits("BTC");if(e)return e}()}),y.disableUsdtOnTron?null:(0,B.jsx)(T.Z,{method:"usdt-tron",name:"USDT (TRON)",summary:"Send from a USDT wallet",selectPaymentMethod:this.selectPaymentMethod,usdcBalance:a,fiatAmount:this.state.fiatAmount,disabledReason:function(){var e=r.checkBaseLimits("USDT");if(e)return e}()}),y.disableBtc?null:(0,B.jsx)(T.Z,{method:"bitcoin",usdcBalance:a,fiatAmount:this.state.fiatAmount,mercuryo:this.state.mercuryo,name:"Card or Apple Pay",disabledReason:function(){var e=r.checkBaseLimits("BTC");return e||(r.state.mercuryo.aboveMaximum?{title:"Amount too large",description:"The maximum amount for this payment method is ".concat(r.state.mercuryo.displayMaximum,".")}:r.state.mercuryo.belowMinimum?{title:"Amount too small",description:"The minimum amount for this payment method is ".concat(r.state.mercuryo.displayMinimum,".")}:void 0)}(),selectPaymentMethod:this.selectPaymentMethod})]}),(0,B.jsx)(M.Z,{currency:this.state.sourceCurrency,round:!0,position:"bottom",setAmount:function(e){r.setState({promoCodeDiscount:e})}})]}),this.state.promoCodeDiscount?null:(0,B.jsxs)("div",{className:"mt-l",children:[" ",(0,B.jsx)(L.Z,{router:this.props.router})," "]}),(0,B.jsx)(N,{showModal:this.props.showVerificationModal,onClick:function(){h().push("/send/verify")},onClose:function(){},verificationStatus:null===(n=this.props.currentUser)||void 0===n?void 0:n.verifiedStatus})]})]}),(0,B.jsx)(F,{showModal:this.state.mercuryo.showModal,recipient:d,onClose:function(){return r.setState({mercuryo:G(G({},r.state.mercuryo),{},{showModal:!1})})},openMercuryo:function(){return r.openMercuryo()}})]})}}]),n}(p.Component);return(0,l.Z)(e,"getInitialProps",void 0),e}var Y=function(){var e=(0,r.Z)(m().mark((function e(t){var r,o,a,i,s,c,u,l,d,p,f,h,y,v,x,g,b;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.pathname,o=t.asPath,a=t.req,i=t.res,!(s=t.err)){e.next=3;break}throw s;case 3:if(e.prev=3,c={title:"Send With",path:(null===o||void 0===o?void 0:o.split("?")[0])||r,description:""},u=null,l=void 0,d=null,!a||!i){e.next=31;break}return e.next=11,i.locals.getCurrentUser().catch((function(){}));case 11:return l=e.sent,p=n(53690),e.next=15,p.getUserAccountBalance(a,null).catch((function(){return null}));case 15:return f=e.sent,h=function(e){return"primary"===e.type&&"dollar"===e.currency},y=null===f||void 0===f?void 0:f.find(h),d=null===y||void 0===y?void 0:y.balance,v=n(50773),x=v.getFxRate,e.prev=20,e.next=23,x(a);case 23:u=e.sent,e.next=29;break;case 26:e.prev=26,e.t0=e.catch(20),console.log("fxrate error",e.t0);case 29:e.next=34;break;case 31:l=null===(g=(0,j.t)("@/global-store"))||void 0===g?void 0:g.currentUser,(b=(0,j.t)("@/exchange-rate"))&&(u=b.fxRate);case 34:return e.abrupt("return",{meta:c,template:"app",usesAuth:!1,showAppMobileNav:!1,showAppDesktopNav:!0,currentUser:l,usdcBalance:d,fxRate:u,showPromoCodeModal:"/apply-promo-code"===r,showVerificationModal:"/send/requires-verification"===r});case 37:throw e.prev=37,e.t1=e.catch(3),e.t1;case 40:case"end":return e.stop()}}),e,null,[[3,37],[20,26]])})));return function(t){return e.apply(this,arguments)}}()},50773:function(e,t,n){var r=n(6016);e.exports={getFxRate:function(e){return r.request(e,"\n\t\t\tquery getExchangeRate($currency: Currency) {\n\t\t\t\tgetExchangeRate(currency: $currency) {\n\t\t\t\t\tbitcoin\n\t\t\t\t\tdollar\n\t\t\t\t\tcanadianDollar\n\t\t\t\t\tnaira\n\t\t\t\t\tpound\n\t\t\t\t\t# cedi\n\t\t\t\t\t# rand\n\t\t\t\t\tusdc\n\t\t\t\t\tusdt\n\t\t\t\t\texpiresAt\n\t\t\t\t\tmaxBitcoin\n\t\t\t\t\tminBitcoin\n\t\t\t\t}\n\t\t\t}\n\t\t",{currency:"dollar"}).then((function(e){var t=e.getExchangeRate;return t.canadian_dollar=t.canadianDollar,t}))}}},6016:function(e,t,n){var r=n(85696),o=n(930);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var s=n(28687).GraphQLClient,c=n(98607),u={request:function(e,t,n,o){var a=(null===o||void 0===o?void 0:o.locals.token)||e.cookies.sendcash_token||null;return new s(c.GRAPHQL_API,{headers:{authorization:"Bearer ".concat(a)}}).request(t,n).catch((function(e){var t,n=function(e){var t,n=i(i({},e),{},{summary:"".concat((null===(t=e.constructor)||void 0===t?void 0:t.name)||e.name,": ")+(e.message+" ").slice(0,e.message.indexOf("{")).trim()}),o=JSON.stringify(n,null,4).replace(/\\n/g,"\n").replace(/\\t/g,"    ");console.log("GraphQL Request Error: ",o);var a="";if("object"===typeof e)e.response&&e.response.error&&(a=e.response.error),e.response&&e.response.errors&&(a=e.response.errors[0].message);else{var s=e.message.split(":");a=r(s,1)[0]}return a}(e);return n.toLowerCase().includes("unauthorized")&&(t=401,null!==o&&void 0!==o&&o.headersSent||(null===o||void 0===o||o.clearCookie("sendcash_token"),null===o||void 0===o||o.clearCookie("current_user"))),Promise.reject({status:t,message:n})}))}};e.exports=u},53690:function(e,t,n){n(87794),n(92358),n(49376),n(28687).gql,n(6016);throw new Error("userService should not be used on the client-side.")},49376:function(e){function t(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,o)}e.exports=function(e){return function(){var n=this,r=arguments;return new Promise((function(o,a){var i=e.apply(n,r);function s(e){t(i,o,a,s,c,"next",e)}function c(e){t(i,o,a,s,c,"throw",e)}s(void 0)}))}},e.exports.default=e.exports,e.exports.__esModule=!0},92358:function(e){e.exports=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))},e.exports.default=e.exports,e.exports.__esModule=!0}}]);
//# sourceMappingURL=7797-a7fcf9e9cba2b936.js.map