(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1446],{37813:function(e,t,n){"use strict";var i=n(67294),r=n(50247).t.createComponent(i);t.Z=r},88850:function(e,t,n){"use strict";n(67294);var i=n(85893);t.Z=function(e){var t=e.condition,n=e.container,r=e.children;return t?n(r):(0,i.jsx)(i.Fragment,{children:r})}},70112:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return O}});var i=n(50029),r=n(92777),s=n(82262),a=n(10748),c=n(81531),l=n(63553),o=n(37247),u=n(59499),p=n(87794),d=n.n(p),h=n(83466),f=n(6704),v=n(24491),x=n(69580),k=function(){var e=(0,i.Z)(d().mark((function e(){var t,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,v.s)()){e.next=2;break}return e.abrupt("return");case 2:if(n=(0,x.t)("@/global-store"),null!==(t=n.currentUser)&&void 0!==t&&t.id){e.next=5;break}return e.abrupt("return");case 5:return e.t0=Promise,e.next=8,m(n);case 8:return e.t1=e.sent,e.next=11,C(n);case 11:return e.t2=e.sent,e.t3=[e.t1,e.t2],e.next=15,e.t0.all.call(e.t0,e.t3);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=(0,i.Z)(d().mark((function e(t){var n,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(n=t.paymentLinks)||void 0===n||!n.all){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,f.Z.request("/payment-links/get");case 5:i=e.sent,t.update("paymentLinks",{all:i}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),t.update("paymentLinks",{all:[]});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=(0,i.Z)(d().mark((function e(t){var n,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(n=t.recipients)||void 0===n||!n.all){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,f.Z.request("/recipient/get-recipients");case 5:i=e.sent,t.update("recipients",{all:i}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),t.update("recipients",{all:[]});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),w=k,g=n(11163),b=n.n(g),j=n(67294),y=n(88437),Z=n(82802),N=n(95078),_=n(59904),L=n(49915),S=n(37813),R=n(85893),A=function(e){var t=e.loading,n=e.recipients,i=e.error,r=e.handleAddRecipient,s=(0,j.useState)(""),a=s[0],c=s[1],l=n.filter((function(e){var t=e.displayName;return""===a||(null===t||void 0===t?void 0:t.toLowerCase().includes(a.toLowerCase()))}));return(0,R.jsxs)("section",{className:e.isDesktop?"card--desktop__body":"mb-l",children:[!t&&n.length>=6&&(0,R.jsx)("input",{type:"text",placeholder:"Search...",className:"text-input text-input--search mt",value:a,onChange:function(e){return c(e.target.value)},onBlur:function(){window.trackEvents({type:"action",properties:{event:"Searched for recipient"}})},"aria-label":"Search for a saved recipient"}),t&&(0,R.jsx)("div",{className:"my-xl",children:(0,R.jsx)(Z.Z,{})}),function(){if(!t&&!i)return l.length>0?(0,R.jsx)("ul",{className:"recipient__list","aria-live":"polite",children:l.map((function(t){return(0,R.jsxs)("li",{children:[(0,R.jsxs)(L.Z,{href:"/recipient/".concat(t.id),className:"recipient__list__display-name","data-analytics-event":"Selected recipient",children:[(0,R.jsx)(N.Z,{slug:t.avatarSlug,initials:(0,_.getInitials)(t.displayName)}),(0,R.jsx)("span",{className:"ml-s flex-1 truncate",children:t.displayName})]}),(0,R.jsxs)(L.Z,{href:"/recipient/".concat(t.id,"/select-bank-account"),className:"link-button","data-analytics-event":"Clicked send to recipient",children:["Send",e.isDesktop&&(0,R.jsx)("span",{className:"ml-l",children:(0,R.jsx)(S.Z,{})})]})]},t.id)}))}):n.length<=0?(0,R.jsxs)("section",{className:"my-xl px flex-layout-center-column",children:[(0,R.jsx)("p",{className:"text-center",children:"Save people as contacts to send them money easily."}),(0,R.jsx)("button",{type:"button",onClick:function(){return r()},className:"button button--xl mt ",children:"Add a recipient"})]}):(0,R.jsx)("p",{className:"text-center my-xl px",children:"No contact found."})}(),!t&&i&&(0,R.jsx)("p",{className:"text-center my-xl",children:i})]})},M=function(e){var t=e.className;return(0,R.jsxs)("svg",{className:t,width:"45",viewBox:"0 0 52 69",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,R.jsx)("circle",{cx:"26.7437",cy:"43.5",r:"25",fill:"#8DA6FF"}),(0,R.jsx)("circle",{cx:"26.7437",cy:"43.5",r:"20.3125",fill:"white"}),(0,R.jsx)("path",{d:"M36.8221 38.1667C36.8221 39.0294 36.5607 39.8268 36.0378 40.5588H29.6065C29.8156 40.402 29.9202 40.1405 29.9202 39.7745C29.9202 39.4085 29.711 39.1209 29.2927 38.9118C28.8744 38.6765 28.3385 38.5588 27.6849 38.5588C25.7241 38.5588 24.7437 39.1601 24.7437 40.3627C24.7437 40.8333 25.1097 41.1732 25.8418 41.3824C26.5738 41.5915 27.4627 41.7614 28.5084 41.8922C29.5542 42.0229 30.5999 42.219 31.6457 42.4804C32.6914 42.7157 33.5803 43.1993 34.3123 43.9314C35.0444 44.6634 35.4104 45.6438 35.4104 46.8726C35.4104 49.0425 34.5346 50.6895 32.7829 51.8137C31.0574 52.9379 28.5346 53.5 25.2143 53.5C21.894 53.5 19.5672 52.9641 18.2339 51.8922C17.1882 51.0556 16.6653 49.9052 16.6653 48.4412C16.6653 48.0229 16.7045 47.5915 16.7829 47.1471L23.3319 47.0686C23.2797 47.4346 23.4888 47.7614 23.9594 48.049C24.4561 48.3105 25.1751 48.4412 26.1163 48.4412C27.0574 48.4412 27.7372 48.3497 28.1555 48.1667C28.5738 47.9575 28.7829 47.5784 28.7829 47.0294C28.7829 46.6634 28.4169 46.415 27.6849 46.2843C26.9529 46.1275 26.0509 45.9967 24.979 45.8922C23.9333 45.7876 22.8744 45.6176 21.8025 45.3824C20.7568 45.1471 19.8679 44.6503 19.1359 43.8922C18.4038 43.134 18.0378 42.1405 18.0378 40.9118C18.0378 38.5327 18.9529 36.7026 20.7829 35.4216C22.6391 34.1405 25.3058 33.5 28.7829 33.5C34.1424 33.5 36.8221 35.0556 36.8221 38.1667Z",fill:"#6889FD"}),(0,R.jsx)("path",{d:"M10.0755 19.6645L2.99295 14.9101C2.59031 14.6398 2.04541 14.7492 1.7759 15.1545C1.50638 15.5597 1.6143 16.1073 2.01695 16.3776L9.09952 21.132C9.50216 21.4022 10.0471 21.2928 10.3166 20.8876C10.5861 20.4824 10.4782 19.9347 10.0755 19.6645Z",fill:"white"}),(0,R.jsx)("path",{d:"M8.57191 4.93908L12.8703 13.4464C13.0896 13.8804 13.6176 14.0529 14.0497 13.8317C14.4818 13.6105 14.6543 13.0794 14.435 12.6454L10.1365 4.13814C9.91725 3.70414 9.38924 3.53161 8.95718 3.75279C8.52512 3.97396 8.35263 4.50508 8.57191 4.93908Z",fill:"white"}),(0,R.jsx)("path",{d:"M23.833 11.6762L24.7592 4.66136C24.823 4.17839 24.4853 3.73554 24.005 3.67222C23.5247 3.60891 23.0836 3.94911 23.0199 4.43208L22.0936 11.4469C22.0298 11.9298 22.3675 12.3727 22.8478 12.436C23.3281 12.4993 23.7692 12.1591 23.833 11.6762Z",fill:"white"})]})},D=function(){return(0,R.jsxs)(L.Z,{"data-analytics-event":"Clicked referral card",href:"/settings/referral",className:"callout callout--button",children:[(0,R.jsx)(M,{className:"callout__logo"}),(0,R.jsx)("span",{className:"callout__content",children:"Invite friends. Get $15"}),(0,R.jsx)("svg",{className:"callout__right-icon",width:"9",height:"14",viewBox:"0 0 9 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,R.jsx)("path",{d:"M1.24988 13L7.24988 7L1.24988 1",stroke:"#fff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})},q=n(88850),U=n(54283),B=n(75268),E=n(99009);function P(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,o.Z)(e);if(t){var r=(0,o.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,l.Z)(this,n)}}var F=function(e){var t=e.children,n=e.quickLink,i=null!==n&&void 0!==n?n:{},r=i.label,s=i.action,a=i.className;return(0,R.jsxs)("section",{className:"card--desktop-with-header mb-l mt-l",children:[(0,R.jsxs)("div",{className:"card--desktop__header",children:[(0,R.jsx)("h3",{children:"Recipients"}),n?(0,R.jsx)("button",{className:"".concat(a||"link-button"," ml"),onClick:s,type:"button",children:r}):null]}),t]})},I=function(e){(0,c.Z)(n,e);var t=P(n);function n(e){var s;return(0,r.Z)(this,n),s=t.call(this,e),(0,u.Z)((0,a.Z)(s),"Store",void 0),(0,u.Z)((0,a.Z)(s),"quickLink",void 0),(0,u.Z)((0,a.Z)(s),"fetchRecipients",(0,i.Z)(d().mark((function e(){var t,n,i=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]&&i[0],s.setState({loading:!t,currentUrl:window.location.pathname}),e.prev=2,e.next=5,f.Z.request("/recipient/get-recipients");case 5:n=e.sent,s.setState({recipients:n}),s.Store.update("recipients",{all:n}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0),s.setState({error:"Error fetching recipients. Please try again later."});case 14:return e.prev=14,s.setState({loading:!1}),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[2,10,14,17]])})))),(0,u.Z)((0,a.Z)(s),"handleCloseModal",(function(){s.setState({showAddRecipientModal:!1}),s.fetchRecipients(!0)})),(0,u.Z)((0,a.Z)(s),"handleAddRecipient",(function(){window.trackEvents({type:"action",properties:{event:"Clicked add recipient"}}),s.setState({showAddRecipientModal:!0})})),(0,u.Z)((0,a.Z)(s),"getQuickLink",(function(){return s.state.recipients.length>0?{label:"Add",classname:"button button--primary button--small",action:function(){return s.handleAddRecipient()}}:void 0})),s.state={showAddRecipientModal:!1,loading:!1,error:"",currentUrl:"",recipients:s.props.recipients||[],isDesktop:!!(0,v.S)()&&(0,U.R)()},(0,v.S)()&&(s.Store=(0,x.t)("@/global-store")),s}return(0,s.Z)(n,[{key:"componentDidMount",value:function(){var e,t;("/recipient/add-recipient"===b().pathname&&this.setState({showAddRecipientModal:!0,currentUrl:window.location.pathname}),this.props.recipients)?this.Store.update("recipients",{all:this.props.recipients}):null!==(e=this.Store.recipients)&&void 0!==e&&e.all?(this.setState({recipients:null===(t=this.Store.recipients)||void 0===t?void 0:t.all}),this.fetchRecipients(!0)):this.fetchRecipients();w()}},{key:"componentDidUpdate",value:function(e,t){var n,i;(null===(n=t.recipients)||void 0===n?void 0:n.length)!==(null===(i=this.state.recipients)||void 0===i?void 0:i.length)&&(this.quickLink=this.getQuickLink())}},{key:"render",value:function(){var e=this;return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(B.Z,{hook:E.C,argumentsList:[],onUpdate:function(t){e.setState({isDesktop:t})}},"useIsDesktop"),(0,R.jsxs)("section",{className:this.state.isDesktop?"page--wide pt":"page--full",children:[this.state.isDesktop?null:(0,R.jsx)(h.Z,{backLink:{href:"/home"},title:"Recipients",quickLink:this.quickLink,showCloseButton:!1}),(0,R.jsxs)("div",{className:"page__main",children:[(0,R.jsx)(D,{}),(0,R.jsx)(q.Z,{condition:this.state.isDesktop,container:function(t){return(0,R.jsx)(F,{quickLink:e.quickLink,children:t})},children:(0,R.jsx)(A,{handleAddRecipient:function(){return e.handleAddRecipient()},isDesktop:this.state.isDesktop,loading:this.state.loading,error:this.state.error,recipients:this.state.recipients})})]})]}),(0,R.jsx)(y.Z,{showModal:this.state.showAddRecipientModal,handleCloseModal:function(){return e.handleCloseModal()},mustBeABeneficiary:!0})]})}}]),n}(j.Component);(0,u.Z)(I,"getInitialProps",function(){var e=(0,i.Z)(d().mark((function e(t){var i,r,s,a,c,l,o,u,p,h,f,k,m;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.pathname,r=t.asPath,s=t.req,a=t.res,t.query,!(c=t.err)){e.next=3;break}throw c;case 3:if(l={title:"Recipients",path:(null===r||void 0===r?void 0:r.split("?")[0])||i,description:""},p=!1,h={title:l.title,authMessage:"",backLink:{href:"/home",name:"Home page"},callbackUrl:"/recipient",skipUrl:"/send/payment-method",skipLabel:"Go Back"},!(0,v.S)()){e.next=11;break}o=null===(f=(0,x.t)("@/global-store"))||void 0===f?void 0:f.currentUser,p=!(null===(k=o)||void 0===k||!k.id),e.next=29;break;case 11:return e.prev=11,e.next=14,a.locals.getCurrentUser();case 14:return o=e.sent,m=n(18490),e.next=18,m.getRecipients(s).catch((function(){}));case 18:u=e.sent,p=!0,e.next=29;break;case 22:if(e.prev=22,e.t0=e.catch(11),401!==e.t0.status){e.next=28;break}p=!1,e.next=29;break;case 28:throw e.t0;case 29:return e.abrupt("return",{meta:l,template:"app",currentUser:o,recipients:u,showAppMobileNav:!0,showAppDesktopNav:!0,usesAuth:!p,signupPrompt:p?void 0:h});case 30:case"end":return e.stop()}}),e,null,[[11,22]])})));return function(t){return e.apply(this,arguments)}}());var O=I},36081:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/recipient",function(){return n(70112)}])}},function(e){e.O(0,[4231,4431,3222,458,5238,453,9774,2888,179],(function(){return t=36081,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
//# sourceMappingURL=recipient-3ed4086daa5b170d.js.map